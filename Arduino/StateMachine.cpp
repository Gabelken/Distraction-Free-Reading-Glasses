#include <Arduino.h>class DualStateMachine {    using Callback = void (*)(const bool);  private:    const byte switchPin;    bool isOn = false;    const int threshold = 800;      public:    DualStateMachine(byte pin) : switchPin(pin) {}    void setup() {      pinMode(switchPin, INPUT);      CheckState([]{});    }    bool CheckState(Callback onStateChanged) {      // Read input from potentiometer switch      int reading = analogRead(switchPin);      bool newState = reading >= threshold;      if (newState != isOn) {        isOn = newState;        onStateChanged(isOn);      }      return isOn;    }    bool GetState() {      return isOn;    }};